<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Trhoncal Homes | Mirador del Bosque ‚Äì Zapopan</title>
  <meta name="description" content="Mirador del Bosque en Zapopan. Prototipos Nardo y Oliva desde $740,000. Acompa√±amiento total en tu cr√©dito." />
  <link rel="canonical" href="https://mirador.3dhomes.com.mx/"/>
  <link rel="preload" as="image" imagesrcset="assets/hero-1600.webp 1x, assets/hero-3200.webp 2x" imagesizes="100vw" href="assets/hero-1600.jpg">
  <style>
    :root{--gold:#C9A227;--dark:#0f172a;--muted:#475569;--bg:#fff;--light:#f8fafc}
    *{box-sizing:border-box} body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;color:var(--dark)}
    a{color:inherit;text-decoration:none} img{max-width:100%;display:block}
    .container{max-width:1100px;margin:0 auto;padding:0 20px}
    .btn{display:inline-block;padding:12px 20px;border-radius:999px;border:1px solid var(--gold);font-weight:600;text-align:center;cursor:pointer}
    .btn.primary{background:var(--gold);color:#fff;border-color:var(--gold)}
    .btn.ghost{background:transparent;color:var(--gold)}
    .btn.whatsapp{background:#25D366!important;border-color:#25D366!important;color:#fff!important}

    header{position:sticky;top:0;background:rgba(255,255,255,.95);backdrop-filter:saturate(180%) blur(8px);border-bottom:1px solid #e2e8f0;z-index:50}
    header .wrap{display:flex;align-items:center;justify-content:space-between;height:72px}
    nav a{margin-left:18px;color:var(--muted)} .logo-img{height:105px}

    @media (max-width:768px){ header nav{display:none} header .wrap{justify-content:center} .logo{margin:0 auto} }

    .breadcrumb{font-size:14px;color:var(--muted);padding:10px 0}
    .hero{position:relative;min-height:420px;display:grid;align-items:end;padding:28px 0;color:#fff}
    @media(max-width:640px){.hero{min-height:340px}}
    .hero::before{content:"";position:absolute;inset:0;z-index:-1;background:
      linear-gradient(180deg,rgba(0,0,0,.35),rgba(0,0,0,.55)),
      image-set(url('assets/hero-1600.webp') type('image/webp') 1x,url('assets/hero-3200.webp') type('image/webp') 2x,
                url('assets/hero-1600.jpg') type('image/jpeg') 1x,url('assets/hero-3200.jpg') type('image/jpeg') 2x);
      background-size:cover;background-position:center;background-repeat:no-repeat;background-color:#cbd5e1}

    .hero h1{font-size:clamp(28px,5vw,46px);line-height:1.1;margin:0 0 10px}
    .hero p{margin:0 0 16px;color:#e5e7eb}
    .badges{display:flex;flex-wrap:wrap;gap:10px;margin:10px 0 22px}
    .badge{padding:8px 12px;border:1px solid #e2e8f0;border-radius:999px;background:rgba(255,255,255,.9);color:#111}

    .section{padding:42px 0}
    .section h2{font-size:clamp(22px,4vw,32px);margin:0 0 14px}
    .grid{display:grid;gap:16px}
    @media(min-width:900px){.grid.cols-2{grid-template-columns:1fr 1fr}}

    .cards{display:grid;grid-template-columns:repeat(12,1fr);gap:18px}
    .card{grid-column:span 12;background:#fff;border:1px solid #e2e8f0;border-radius:16px;overflow:hidden;box-shadow:0 8px 22px rgba(0,0,0,.04)}
    .card img{width:100%;height:200px;object-fit:cover;background:#e2e8f0}
    .card .p{padding:14px}
    .card h3{margin:0 0 6px;font-size:18px}
    .meta{color:var(--muted);font-size:14px;margin-bottom:10px}
    @media(min-width:700px){.card{grid-column:span 6}} @media(min-width:1000px){.card{grid-column:span 4}}

    .icon-list{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
    @media(min-width:700px){.icon-list{grid-template-columns:repeat(3,1fr)}}
    .icon-item{display:flex;align-items:center;gap:10px;border:1px solid #e2e8f0;border-radius:12px;padding:10px;background:#fff}

    footer{padding:32px 0;color:var(--muted)}
    .wa-float{position:fixed;right:18px;bottom:18px;background:#25D366;color:#fff;padding:14px 16px;border-radius:999px;box-shadow:0 8px 22px rgba(0,0,0,.18);font-weight:800;z-index:60}
    .sticky-cta{position:sticky;bottom:0;background:#fff;border-top:1px solid #e2e8f0;padding:10px;display:flex;gap:10px;justify-content:center}

    /* Form alineado */
    form label{display:block;margin:0 0 6px;font-weight:600}
    form input,form textarea{width:100%;display:block;padding:12px 14px;border:1px solid #e2e8f0;border-radius:10px;font-size:16px;outline:0;background:#fff}
    form input:focus,form textarea:focus{border-color:var(--gold);box-shadow:0 0 0 3px rgba(201,162,39,.15)}
    .grid.cols-2>div{display:flex;flex-direction:column;gap:6px}
    form textarea{min-width:0}
    @media(max-width:899px){.grid.cols-2{grid-template-columns:1fr}}

    /* Toast */
    .toast{position:fixed;top:18px;left:50%;transform:translateX(-50%);background:#111;color:#fff;padding:12px 16px;border-radius:10px;box-shadow:0 8px 24px rgba(0,0,0,.25);z-index:100;opacity:0;pointer-events:none;transition:.25s}
    .toast.show{opacity:1}
    .highlight-pulse{animation: pulse .9s ease-out 1}
    @keyframes pulse{0%{box-shadow:0 0 0 0 rgba(201,162,39,.0)}50%{box-shadow:0 0 0 6px rgba(201,162,39,.25)}100%{box-shadow:0 0 0 0 rgba(201,162,39,.0)}}

    /* Accesible "invisible" */
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

    /* Ocultar sin borrar */
    .is-hidden{display:none!important}
  </style>
</head>
<body>
  <header>
    <div class="container wrap">
      <div class="logo"><img class="logo-img" src="assets/logo-trhoncal-flat.png" alt="Trhoncal Homes" /></div>
      <nav><a href="/">Inicio</a><a href="/catalogo-devs.html">Desarrollos</a><a href="#contacto">Contacto</a></nav>
    </div>
  </header>

  <main>
    <div class="container breadcrumb">Inicio ‚ñ∏ Desarrollos ‚ñ∏ <strong>Mirador del Bosque</strong></div>

    <section class="hero">
      <div class="container">
        <h1 id="dev-title">Mirador del Bosque</h1>
        <p>Vive al norte de Zapopan con conexi√≥n a servicios y naturaleza.</p>
        <div class="badges">
          <div class="badge">Ubicaci√≥n: Zapopan</div>
          <div class="badge">Desde <strong>$699,000</strong></div>
          <div class="badge">2 rec√°maras</div>
          <div class="badge">Amenidades destacadas</div>
        </div>
        <div class="cta-bar">
          <a class="btn whatsapp js-wa-link" data-rol="info" href="#">Solicitar informaci√≥n por WhatsApp</a>
          <a class="btn ghost js-wa-link" data-rol="ficha" href="#">Solicitar ficha</a>
        </div>
      </div>
    </section>

    <section class="section">
      <div class="container grid cols-2">
        <div>
          <h2>Resumen</h2>
          <p class="meta">Prototipos <strong>Nardo</strong> y <strong>Oliva</strong>. Agenda visita para conocer disponibilidad y precios vigentes.</p>
        </div>
        <div>
          <h2>Amenidades</h2>
          <div class="icon-list">
            <div class="icon-item">üå≥ √Åreas verdes</div>
            <div class="icon-item">üõ°Ô∏è Acceso controlado</div>
            <div class="icon-item">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Juegos infantiles</div>
            <div class="icon-item">üî• Asadores</div>
            <div class="icon-item">üèä Alberca "Algunos desarrollos"</div>
            <div class="icon-item">üèãÔ∏è Gimnasio</div>
          </div>
          <p class="meta" style="margin-top:8px">*Puede variar por etapa y disponibilidad.</p>
        </div>
      </div>
    </section>

    <section id="modelos" class="section">
      <div class="container">
        <h2>Prototipos</h2>
        <div class="cards">
          <article class="card">
            <img src="assets/nardo.jpg" alt="Nardo" />
            <div class="p">
              <h3>Nardo</h3>
              <div class="meta">2 rec√°maras</div>
              <div style="display:flex;align-items:center;justify-content:space-between">
                <span>Desde <strong>$699,000</strong></span>
                <a class="btn js-wa-link" data-rol="ficha" data-model="Nardo" href="#">Solicitar ficha</a>
              </div>
            </div>
          </article>

          <article class="card">
            <img src="assets/oliva.jpg" alt="Oliva" />
            <div class="p">
              <h3>Oliva</h3>
              <div class="meta">2 rec√°maras</div>
              <div style="display:flex;align-items:center;justify-content:space-between">
                <span>Desde <strong>$754,000</strong></span>
                <a class="btn js-wa-link" data-rol="ficha" data-model="Oliva" href="#">Solicitar ficha</a>
              </div>
            </div>
          </article>
        </div>
      </div>
    </section>

    <section id="contacto" class="section" style="border-top:1px solid #e2e8f0">
      <div class="container">
        <h2>Solicita informaci√≥n de Mirador del Bosque</h2>
        <p class="meta">D√©janos tus datos y un asesor te escribe por WhatsApp.</p>

        <form id="lead-form" autocomplete="on">
          <input type="hidden" id="desarrollo" name="desarrollo" value="Mirador del Bosque" />

          <!-- Proxies accesibles para ayudar al Autofill de algunos navegadores -->
          <input id="full_name_proxy" name="name" class="sr-only" type="text" autocomplete="name" tabindex="-1" aria-hidden="true">
          <input id="phone_proxy" name="phone" class="sr-only" type="tel" autocomplete="tel" tabindex="-1" aria-hidden="true">

          <div class="grid cols-2">
            <div>
              <label for="nombre">Nombre</label>
              <!-- Usamos autocomplete="name" para permitir nombre completo y luego lo partimos -->
              <input id="nombre" name="nombre" required placeholder="Tu nombre"
                     autocomplete="name" autocapitalize="words" />
            </div>
            <div>
              <label for="apellido_paterno">Apellido paterno</label>
              <input id="apellido_paterno" name="apellido_paterno" required placeholder="Tu apellido paterno"
                     autocomplete="family-name" autocapitalize="words" />
            </div>
            <div>
              <label for="apellido_materno">Apellido materno</label>
              <input id="apellido_materno" name="apellido_materno" required placeholder="Tu apellido materno"
                     autocomplete="additional-name" autocapitalize="words" />
            </div>
            <div>
              <label for="whatsapp">WhatsApp</label>
              <input id="whatsapp" name="whatsapp" required type="tel" inputmode="tel"
                     autocomplete="tel" placeholder="Ej. 33 2933 5952" />
            </div>
            <div>
              <label for="correo">Correo electr√≥nico</label>
              <input id="correo" name="correo" required type="email"
                     autocomplete="email" spellcheck="false" placeholder="tu@correo.com" />
            </div>
          </div>

          <div>
            <label for="mensaje">Mensaje</label>
            <textarea id="mensaje" name="mensaje" rows="4" placeholder="Cu√©ntanos qu√© buscas..."></textarea>
          </div>

          <div class="cta-bar" style="display:flex;gap:10px;flex-wrap:wrap">
            <a id="send-wa" class="btn whatsapp js-wa-link" data-rol="info" href="#">Solicitar informaci√≥n por WhatsApp</a>
          </div>
          <p id="form-msg" style="margin:10px 0 0;display:none"></p>
        </form>
      </div>
    </section>

    <div class="sticky-cta">
      <a id="sticky-send" class="btn whatsapp js-wa-link" data-rol="info" href="#">Solicitar informaci√≥n por WhatsApp</a>
      <a class="btn ghost js-wa-link" data-rol="ficha" href="#">Solicitar ficha</a>
    </div>
  </main>

  <footer>
    <div class="container">
      <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;justify-content:space-between">
        <small>¬© <span id="year"></span> Trhoncal Homes. TR + HON + CAL.</small>
        <small>Privacidad ¬∑ T√©rminos ¬∑ Aviso legal</small>
      </div>
    </div>
  </footer>

  <!-- Bot√≥n flotante: OCULTO, no borrado -->
  <a class="wa-float is-hidden" target="_blank" rel="noopener"
     href="https://wa.me/523329335952?text=Hola%20Trhoncal%20Homes%2C%20me%20interesa%20Mirador%20del%20Bosque">WhatsApp</a>

  <!-- Toast -->
  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <!-- JS -->
  <script defer>
  (function(){
    const WA_DEST   = "523329335952"; // +52 33 2933 5952
    const ENDPOINT  = "https://script.google.com/macros/s/AKfycbxI401Elzx8NTYSYMK4D69ya-rSkjgfqM0UbEGtSLoqWHQ3FxY-Ihc0AhKuLdE58WuD/exec";

    const $ = (s,p=document)=>p.querySelector(s);
    const $$= (s,p=document)=>Array.from(p.querySelectorAll(s));

    document.addEventListener('DOMContentLoaded', () => {
      $('#year').textContent = new Date().getFullYear();

      // Desarrollo = h1
      const h1 = $('#dev-title'); const dev = $('#desarrollo');
      if(h1 && dev){ dev.value = h1.textContent.trim(); }

      // Prefill por query y localStorage
      prefill(['nombre','apellido_paterno','apellido_materno','whatsapp','correo','mensaje']);

      // Proxies: espejo con whatsapp y nombre completo si el navegador usa name/phone
      bindProxies();

      // Si el usuario/Autofill meti√≥ nombre completo en "Nombre", partir a apellidos si est√°n vac√≠os
      const nombre = $('#nombre');
      nombre.addEventListener('change', splitFullNameIfNeeded);
      nombre.addEventListener('blur', splitFullNameIfNeeded);

      // Tambi√©n intentamos dividir tras un tiempo (por si el Autofill rellena en diferido)
      setTimeout(splitFullNameIfNeeded, 600);

      // Agregar gating a todos los botones WA
      $$('.js-wa-link').forEach(a=>{
        a.addEventListener('click', (ev)=>{
          const form = $('#lead-form');
          const rol = a.dataset.rol || 'info';
          if(!form.reportValidity()){
            dataLayerPush({event:'wa_intent_bloqueado', rol, motivo:'incompleto', desarrollo: dev.value});
            showToast( rol === 'ficha'
              ? 'Para enviarte la ficha, completa tu nombre y apellidos, WhatsApp y correo. Te la mandamos directo por WhatsApp.'
              : 'Para atenderte por WhatsApp, completa tu nombre y apellidos, WhatsApp y correo. Te contactamos en minutos.'
            );
            form.classList.add('highlight-pulse');
            form.scrollIntoView({behavior:'smooth', block:'start'});
            setTimeout(()=>form.classList.remove('highlight-pulse'), 1000);
            ev.preventDefault();
            return;
          }

          // V√°lido: construir datos, guardar y abrir WA
          const d = getData();
          sendLead(d);
          dataLayerPush({event:'wa_click', rol, desarrollo: dev.value});

          const url = buildWA(d, a.dataset.model, rol);
          a.setAttribute('href', url);
          a.setAttribute('target', '_blank');
        }, {once:false});
      });

      // QA panel (solo si ?qa=1)
      const qp = new URLSearchParams(location.search);
      if(qp.get('qa')==='1'){ mountQA(); }

      dataLayerPush({event:'page_view', desarrollo: dev.value});
    });

    function getData(){
      const f = $('#lead-form');
      const d = Object.fromEntries(new FormData(f).entries());
      d.whatsapp = digits(d.whatsapp || $('#phone_proxy').value);
      // nombre completo
      let full = ($('#full_name_proxy').value || '').trim();
      if(!full){
        full = [d.nombre, d.apellido_paterno, d.apellido_materno].filter(Boolean).join(' ');
      }
      d.nombre_completo = full.replace(/\s+/g,' ').trim();

      // Guardar en localStorage
      ['nombre','apellido_paterno','apellido_materno','whatsapp','correo','mensaje'].forEach(k=>{
        if(d[k]) localStorage.setItem('lead_'+k, d[k]);
      });
      return d;
    }

    function buildWA(d, model, rol){
      const desarrollo = d.desarrollo || 'el desarrollo';
      const extra = model ? ` (Modelo ${model})` : (rol==='ficha' ? ' (Solicito ficha)' : '');
      const texto = `Hola Trhoncal Homes, me interesa ${desarrollo}${extra}. ` +
                    `Soy ${d.nombre_completo}. ` +
                    `Mi correo es ${d.correo}. ` +
                    `Mi WhatsApp es ${d.whatsapp}. ` +
                    `${d.mensaje||''}`.trim();
      return `https://wa.me/${WA_DEST}?text=${encodeURIComponent(texto)}`;
    }

    // Env√≠o a Apps Script (beacon + fetch keepalive)
    function sendLead(d){
      const payload = {
        nombre: d.nombre_completo,
        email: d.correo,
        whatsapp: d.whatsapp,
        zona: d.desarrollo || 'Mirador del Bosque',
        presupuesto: '',
        mensaje: d.mensaje || ''
      };
      try{
        if(navigator.sendBeacon){
          const blob = new Blob([JSON.stringify(payload)], {type:'application/json'});
          navigator.sendBeacon(ENDPOINT, blob);
        }else{
          fetch(ENDPOINT, {
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body: JSON.stringify(payload),
            mode:'no-cors',
            keepalive:true
          });
        }
        dataLayerPush({event:'lead_submit', desarrollo: payload.zona, email_domain:(d.correo||'').split('@')[1]||'', phone_last4:(d.whatsapp||'').slice(-4)});
      }catch(_){}
    }

    // Prefill URL + localStorage
    function prefill(fields){
      const qp = new URLSearchParams(location.search);
      const map = {
        apellido_paterno: ['apellidop','apaterno','paterno'],
        apellido_materno: ['apellidom','amaterno','materno'],
        whatsapp: ['telefono','phone'],
        correo: ['email','mail'],
        nombre: ['name','fullname']
      };
      fields.forEach(f=>{
        const el = $('#'+f); if(!el) return;
        let v = qp.get(f) || (map[f]||[]).map(k=>qp.get(k)).find(Boolean) || localStorage.getItem('lead_'+f) || '';
        if(v) el.value = v;
        el.addEventListener('input',()=>localStorage.setItem('lead_'+f, el.value));
      });
    }

    function splitFullNameIfNeeded(){
      const n = $('#nombre'), ap = $('#apellido_paterno'), am = $('#apellido_materno');
      const val = (n.value||'').trim();
      const parts = val.split(/\s+/);
      // Si apellidos vac√≠os y nombre parece tener 2+ palabras, dividimos.
      if(!ap.value && !am.value && parts.length>=2){
        n.value = parts[0];
        ap.value = parts[1] || '';
        am.value = parts.slice(2).join(' ');
        // Persistimos
        localStorage.setItem('lead_nombre', n.value);
        localStorage.setItem('lead_apellido_paterno', ap.value);
        localStorage.setItem('lead_apellido_materno', am.value);
      }
      // Tambi√©n guardamos el proxy de nombre completo
      $('#full_name_proxy').value = [n.value, ap.value, am.value].filter(Boolean).join(' ').trim();
    }

    function bindProxies(){
      const wp = $('#whatsapp'), pp = $('#phone_proxy');
      const fn = $('#full_name_proxy'), n = $('#nombre'), ap = $('#apellido_paterno'), am = $('#apellido_materno');

      // Espejo tel
      const syncPhone = ()=>{ pp.value = digits(wp.value); };
      wp.addEventListener('input', syncPhone); syncPhone();

      // Espejo full name
      const syncFull = ()=>{ fn.value = [n.value, ap.value, am.value].filter(Boolean).join(' ').trim(); };
      n.addEventListener('input', syncFull);
      ap.addEventListener('input', syncFull);
      am.addEventListener('input', syncFull);
      syncFull();

      // Si el navegador autocompleta fn/pp, reflejar hacia los visibles
      fn.addEventListener('change', ()=>{
        const parts = (fn.value||'').trim().split(/\s+/);
        if(parts.length>=2){
          n.value = parts[0];
          ap.value = parts[1] || '';
          am.value = parts.slice(2).join(' ');
        }else if(parts.length===1){
          n.value = parts[0];
        }
      });
      pp.addEventListener('change', ()=>{ wp.value = digits(pp.value); });
    }

    // Utilidades UI
    function showToast(msg){
      const t = $('#toast'); if(!t) return;
      t.textContent = msg;
      t.classList.add('show');
      clearTimeout(t._h);
      t._h = setTimeout(()=>t.classList.remove('show'), 2600);
    }
    function digits(s){ return (s||'').replace(/\D+/g,''); }
    function dataLayerPush(obj){
      window.dataLayer = window.dataLayer || [];
      window.dataLayer.push(obj);
    }

    // QA helpers: aparece solo con ?qa=1
    function mountQA(){
      const bar = document.createElement('div');
      bar.style.position='fixed'; bar.style.bottom='18px'; bar.style.left='18px';
      bar.style.background='#111'; bar.style.color='#fff'; bar.style.padding='8px 10px';
      bar.style.borderRadius='10px'; bar.style.fontSize='12px'; bar.style.zIndex='120';
      bar.style.display='flex'; bar.style.gap='8px'; bar.style.alignItems='center';
      bar.innerHTML = '<strong>QA</strong> <button id="qa-ping" class="btn" style="padding:6px 10px;border-radius:8px;border:1px solid #444;background:#222;color:#fff;">Ping</button><button id="qa-test" class="btn" style="padding:6px 10px;border-radius:8px;border:1px solid #444;background:#222;color:#fff;">Prueba GET</button>';
      document.body.appendChild(bar);

      $('#qa-ping').addEventListener('click', ()=>{ window.open(ENDPOINT+'?ping=1','_blank'); });
      $('#qa-test').addEventListener('click', ()=>{
        const dev = $('#desarrollo')?.value || 'Mirador del Bosque';
        const u = ENDPOINT + '?test=1'
          + '&nombre=' + encodeURIComponent('PRUEBA WEB')
          + '&email=' + encodeURIComponent('test@web.com')
          + '&whatsapp=' + encodeURIComponent('3329335952')
          + '&zona=' + encodeURIComponent(dev)
          + '&mensaje=' + encodeURIComponent('Hola desde QA');
        window.open(u,'_blank');
        showToast('Prueba enviada (GET). Revisa tu hoja.');
      });
    }
  })();
  </script>
</body>
</html>
